version: "3.8" # 告诉建筑队：我们要用 3.8 版的“方言”来沟通

services: # 这里列出我们要雇佣的所有“员工”
  db: # 这是负责记账的“账房先生”，咱们叫他 db
    image: postgres:15-alpine # 账房先生的出身：Postgres家族的第15代传人，穿着轻便的登山装(Alpine)，跑得快！
    container_name: slot-machine-db # 给他的工位贴个大名牌：老虎机数据库
    ports:
      - "5432:5432" # 传话筒：对着你电脑的 5432 号洞喊话，声音会直接传到玻璃房子里账房先生耳朵贴着的 5432 号位置
    environment: # 入职时的私密小纸条
      POSTGRES_USER: admin # 纸条写着：以后大家叫你“管理员(admin)”
      POSTGRES_PASSWORD: password123 # 纸条写着：进你房间的暗号是“password123”
      POSTGRES_DB: slot_machine # 纸条写着：上班第一件事，拿个新本子，名字写上“slot_machine”，以后账都记这里
    volumes:
      - ./data/postgres:/var/lib/postgresql/data # 神奇滑梯：账房先生在屋里写的账本，会顺着滑梯直接滑到你地板上的 ./data 目录，房子炸了账本也不会丢
    networks:
      - game-network # 给账房先生发个对讲机，频道叫“游戏网络”，以后方便跟其他人通话

networks: # 定义公司的内部对讲机频道
  game-network: # 创建一个叫 game-network 的频道，让大家都能在里面聊天
    driver: bridge